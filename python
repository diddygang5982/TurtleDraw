import turtle
import math

def main():
    # Initialize turtle
    screen = turtle.Screen()
    screen.setup(450, 450)
    screen.title("Turtle Draw")
    
    t = turtle.Turtle()
    t.speed(0)  # Maximum speed
    
    # Ask for input file
    filename = input("Enter the name of the input file: ")
    
    try:
        with open(filename, 'r') as file:
            total_distance = 0
            prev_x, prev_y = 0, 0
            first_move = True
            
            for line in file:
                line = line.strip()
                if not line:
                    continue
                
                parts = line.split()
                
                if parts[0].lower() == 'stop':
                    t.penup()
                else:
                    color = parts[0]
                    try:
                        x = int(parts[1])
                        y = int(parts[2])
                    except (IndexError, ValueError):
                        continue
                    
                    t.color(color)
                    
                    if first_move:
                        t.penup()
                        t.goto(x, y)
                        t.pendown()
                        first_move = False
                    else:
                        if t.isdown():  # Only calculate distance if pen is down
                            distance = math.sqrt((x - prev_x)**2 + (y - prev_y)**2)
                            total_distance += distance
                        t.goto(x, y)
                    
                    prev_x, prev_y = x, y
            
            # Display total distance at bottom right
            t.penup()
            t.goto(200, -200)
            t.write(f"Total distance: {total_distance:.2f}", align="right", font=("Arial", 10, "normal"))
            
    except FileNotFoundError:
        print(f"Error: File '{filename}' not found.")
        return
    
    # Wait for user to press enter before closing
    input("Press Enter to close the window...")
    turtle.bye()

if __name__ == "__main__":
    main()
